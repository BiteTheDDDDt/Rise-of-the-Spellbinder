# èŒä¸šç³»ç»Ÿæ–‡æ¡£

## æ¦‚è¿°

èŒä¸šç³»ç»Ÿæ˜¯Rise of the Spellbinderä¸­çš„æ ¸å¿ƒè¿›é˜¶ç³»ç»Ÿï¼Œç©å®¶å¯ä»¥é€šè¿‡è§£é”èŒä¸šæ¥è·å¾—å¼ºå¤§çš„èƒ½åŠ›å’Œæ–°çš„æŠ€èƒ½ã€‚

## ç‰¹æ€§

### 1. èŒä¸šæ ‘ç»“æ„
- **åˆ†å±‚ç»“æ„**: èŒä¸šæŒ‰ç…§tierï¼ˆå±‚çº§ï¼‰ç»„ç»‡ï¼Œä»tier 0åˆ°tier 6
- **å¤šåˆ†æ”¯**: èŒä¸šæ ‘åŒ…å«å¤šä¸ªåˆ†æ”¯ï¼ŒåŒ…æ‹¬å…ƒç´ åˆ†æ”¯ï¼ˆç«ã€æ°´ã€åœŸã€é£ï¼‰å’Œç‰¹è‰²åˆ†æ”¯ï¼ˆæˆ˜æ–—ã€å¬å”¤ã€æ··æ²Œç­‰ï¼‰
- **éšè—èŒä¸š**: æŸäº›èŒä¸šæ˜¯éšè—çš„ï¼Œéœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶æ‰èƒ½çœ‹åˆ°å’Œè§£é”

### 2. èŒä¸šæ•ˆæœ

èŒä¸šæä¾›å¤šç§æ•ˆæœï¼š

#### æ³•æœ¯å¼ºåº¦ (spell_power)
- æé«˜æ‰€æœ‰æ³•æœ¯çš„ä¼¤å®³
- å€¼: æ•°å€¼

#### æ³•åŠ›å®¹é‡ (mana_capacity)
- å¢åŠ æ‰€æœ‰å…ƒç´ é­”åŠ›çš„ä¸Šé™
- å€¼: æ•°å€¼

#### æ³•åŠ›æ¢å¤ (mana_regen)
- æé«˜é­”åŠ›æ¢å¤é€Ÿåº¦
- å€¼: æ•°å€¼/ç§’

#### æŠ€èƒ½è§£é” (skill_unlock)
- è§£é”ç‰¹å®šæŠ€èƒ½
- target: æŠ€èƒ½ID

#### æŠ€èƒ½ä¸Šé™ (skill_max)
- æé«˜ç‰¹å®šæŠ€èƒ½çš„æœ€å¤§ç­‰çº§
- target: æŠ€èƒ½ID
- value: å¢åŠ çš„ä¸Šé™å€¼

#### è‡ªå®šä¹‰æ•ˆæœ (custom)
- è‡ªå®šä¹‰å±æ€§åŠ æˆ
- target: å±æ€§åç§°ï¼ˆå¦‚defense, evasion, healingï¼‰
- value: æ•°å€¼

### 3. èŒä¸šè¦æ±‚

è§£é”èŒä¸šéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

#### å¤©èµ‹è¦æ±‚ (talent)
```json
{
  "type": "talent",
  "target": "fire",
  "value": 20
}
```
éœ€è¦ç«å¤©èµ‹è¾¾åˆ°20

#### æŠ€èƒ½è¦æ±‚ (skill)
```json
{
  "type": "skill",
  "target": "fire_affinity",
  "value": 10
}
```
éœ€è¦fire_affinityæŠ€èƒ½è¾¾åˆ°10çº§

#### ç­‰çº§è¦æ±‚ (level)
```json
{
  "type": "level",
  "value": 5
}
```
éœ€è¦ç©å®¶ç­‰çº§è¾¾åˆ°5

#### å‰ç½®èŒä¸š (previous_class)
```json
{
  "type": "previous_class",
  "target": "apprentice"
}
```
éœ€è¦å·²è§£é”"å­¦å¾’"èŒä¸š

#### è‡ªå®šä¹‰æ¡ä»¶ (custom)
```json
{
  "type": "custom",
  "condition": "fire + water >= 100"
}
```
æ»¡è¶³è‡ªå®šä¹‰JavaScriptè¡¨è¾¾å¼

### 4. èŒä¸šæ¶ˆè€—

è§£é”èŒä¸šéœ€è¦æ¶ˆè€—ï¼š

#### é‡‘å¸ (gold)
```json
{
  "costs": {
    "gold": 100
  }
}
```

#### ç»éªŒå€¼ (experience)
```json
{
  "costs": {
    "experience": 50
  }
}
```

#### ç ”ç©¶ (research)
```json
{
  "costs": {
    "research": 10
  }
}
```

## èŒä¸šè·¯çº¿

### å…ƒç´ è·¯çº¿

#### ç«ç„°è·¯çº¿
```
å­¦å¾’ â†’ ç«ç„°ä¿¡å¾’ â†’ ç«ç„°æ³•å¸ˆ â†’ ç«ç„°æœ¯å£«
                          â†“
                    å…ƒç´ ä½¿
```

#### æ°´ç³»è·¯çº¿
```
å­¦å¾’ â†’ æ°´ä¹‹ä¿¡å¾’ â†’ æ°´ç³»æ³•å¸ˆ â†’ æ°´æœ¯å£«
                          â†“
                          å†°éœœæ³•å¸ˆ
```

#### åœŸç³»è·¯çº¿
```
å­¦å¾’ â†’ å¤§åœ°ä¿¡å¾’ â†’ å¤§åœ°æ³•å¸ˆ â†’ åœ°æœ¯å¸ˆ
                          â†“
                    å…ƒç´ ä½¿
```

#### é£ç³»è·¯çº¿
```
å­¦å¾’ â†’ é£ä¹‹ä¿¡å¾’ â†’ é£ç³»æ³•å¸ˆ â†’ é£æœ¯å¸ˆ
                          â†“
                    é›·æ³•å¸ˆ
```

### æ··åˆè·¯çº¿

#### æˆ˜æ–—è·¯çº¿
```
å­¦å¾’ â†’ æˆ˜æ–—æ³•å¸ˆ â†’ æ··æ²Œæ³•å¸ˆ / åœ£éª‘å£«
                    â†“
              æ¶é­”çŒæ‰‹ / æ—¶é—´æ³•å¸ˆ
```

#### å¬å”¤è·¯çº¿
```
å­¦å¾’ â†’ å¬å”¤å¸ˆ â†’ å…ƒç´ ä½¿ â†’ å¤©ç•Œæ³•å¸ˆ
                    â†“
              å…ƒç´ é¢†ä¸»
```

### é«˜çº§è·¯çº¿

#### ä¼ è¯´èŒä¸š
- **è™šç©ºè¡Œè€…**: éœ€è¦é£å’ŒåœŸå¤©èµ‹ + å¬å”¤å¸ˆ
- **æ³°å¦**: éœ€è¦ç«å’ŒåœŸå¤©èµ‹ + ç«ç„°æ³•å¸ˆ + å¤§åœ°æ³•å¸ˆ
- **æ­»çµæ³•å¸ˆ**: éœ€è¦åœŸå’Œç«å¤©èµ‹ + ç«ç„°æ³•å¸ˆ + å¤§åœ°æ³•å¸ˆ
- **é¾™è£”**: éœ€è¦ç«å’ŒåœŸå¤©èµ‹ + ç«ç„°æœ¯å£« + æ³°å¦
- **å…ƒç´ é¢†ä¸»**: éœ€è¦æ‰€æœ‰å…ƒç´ å¤©èµ‹90 + å¤©ç•Œæ³•å¸ˆ

## å¯è§†åŒ–ç•Œé¢

èŒä¸šæ ‘ç•Œé¢æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **èŠ‚ç‚¹æ˜¾ç¤º**
   - èŒä¸šèŠ‚ç‚¹æŒ‰tieråˆ†å±‚æ’åˆ—
   - è¿æ¥çº¿æ˜¾ç¤ºå‰ç½®å…³ç³»
   - ä¸åŒé¢œè‰²æ ‡è¯†çŠ¶æ€ï¼š
     - ç°è‰²: é”å®š
     - ç»¿è‰²: å¯è§£é”
     - ç»¿è‰²èƒŒæ™¯: å·²è§£é”
     - æ©™è‰²: éšè—èŒä¸š

2. **äº¤äº’æ“ä½œ**
   - æ‹–æ‹½å¹³ç§»
   - æ»šè½®ç¼©æ”¾
   - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
   - è§£é”èŒä¸š

3. **è¯¦ç»†ä¿¡æ¯**
   - èŒä¸šæè¿°
   - è§£é”æ¡ä»¶
   - æ¶ˆè€—èµ„æº
   - èŒä¸šæ•ˆæœ
   - å½“å‰èŒä¸šæ•ˆæœæ±‡æ€»

## ä½¿ç”¨æ–¹æ³•

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```typescript
import { ClassManager, createDefaultClassTree } from './systems/class'

// åˆ›å»ºèŒä¸šç®¡ç†å™¨
const classManager = new ClassManager()
classManager.setClassTree(createDefaultClassTree())

// æ£€æŸ¥èƒ½å¦è§£é”èŒä¸š
const canUnlock = classManager.canUnlockClass(
  'fire_mage',
  playerTalent,
  playerSkills,
  playerLevel,
  playerGold
)

// è§£é”èŒä¸š
if (canUnlock) {
  const success = classManager.unlockClass(
    'fire_mage',
    playerTalent,
    playerSkills,
    playerLevel,
    playerGold
  )
  if (success) {
    // æ‰£é™¤é‡‘å¸
    resourceManager.getResource('gold')?.add(-cost)
  }
}

// è·å–èŒä¸šæ•ˆæœ
const effects = classManager.getClassEffects()

// è·å–æŠ€èƒ½ä¸Šé™åŠ æˆ
const skillMaxBonuses = classManager.getSkillMaxBonuses()

// è·å–è§£é”çš„æŠ€èƒ½
const unlockedSkills = classManager.getUnlockedSkills()
```

### åœ¨æ¸¸æˆä¸­ä½¿ç”¨

1. æ‰“å¼€æ¸¸æˆï¼Œç‚¹å‡»"èŒä¸š"èœå•
2. æµè§ˆèŒä¸šæ ‘ï¼ŒæŸ¥çœ‹å¯è§£é”çš„èŒä¸š
3. ç‚¹å‡»èŒä¸šèŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
4. æ»¡è¶³æ¡ä»¶åç‚¹å‡»"è§£é”èŒä¸š"æŒ‰é’®

## è®¾è®¡åŸåˆ™

å‚è€ƒarcanumé¡¹ç›®çš„è®¾è®¡ï¼ŒèŒä¸šç³»ç»Ÿéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. **æ¸è¿›å¼è§£é”**: ä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥è§£é”
2. **å¤šè·¯å¾„**: æä¾›å¤šç§è¿›é˜¶è·¯çº¿
3. **éšè—å†…å®¹**: æŸäº›èŒä¸šéœ€è¦æ¢ç´¢æ‰èƒ½å‘ç°
4. **å¹³è¡¡æ€§**: é«˜tierèŒä¸šéœ€è¦æ›´é«˜çš„å¤©èµ‹å’Œå‰ç½®èŒä¸š
5. **ç‰¹è‰²åŒ–**: æ¯ä¸ªèŒä¸šéƒ½æœ‰ç‹¬ç‰¹çš„æ•ˆæœå’Œå®šä½

## æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°èŒä¸š

1. åœ¨`classData.ts`ä¸­æ·»åŠ èŒä¸šå®šä¹‰ï¼š

```typescript
{
  id: 'new_class',
  name: 'æ–°èŒä¸š',
  description: 'èŒä¸šæè¿°',
  tier: 2,
  element: 'fire',
  requirements: [
    { type: 'talent', target: 'fire', value: 30 },
    { type: 'previous_class', target: 'fire_acolyte' }
  ],
  costs: { gold: 500, experience: 200 },
  effects: [
    { type: 'spell_power', value: 15 },
    { type: 'skill_max', target: 'fire_affinity', value: 5 }
  ],
  prerequisites: ['fire_acolyte'],
  icon: 'ğŸ”¥',
  flavor: 'èŒä¸šé£å‘³æ–‡æœ¬'
}
```

2. æ›´æ–°èŒä¸šæ ‘è¿æ¥

### æ·»åŠ æ–°æ•ˆæœç±»å‹

åœ¨`class.ts`çš„`ClassEffect`ç±»å‹ä¸­æ·»åŠ æ–°ç±»å‹ï¼š

```typescript
export interface ClassEffect {
  type: 'skill_unlock' | 'skill_max' | 'talent_bonus' | 'mana_capacity' | 'mana_regen' | 'spell_power' | 'custom' | 'new_effect_type'
  target?: string
  value: number
}
```

ç„¶ååœ¨Player.applyClassEffectsä¸­å¤„ç†æ–°æ•ˆæœã€‚

## æŠ€æœ¯å®ç°

- **ClassNode**: å•ä¸ªèŒä¸šèŠ‚ç‚¹
- **ClassTree**: èŒä¸šæ ‘ç»“æ„ï¼Œç®¡ç†èŠ‚ç‚¹å’Œè¿æ¥
- **ClassManager**: èŒä¸šç®¡ç†å™¨ï¼Œå¤„ç†è§£é”å’Œæ•ˆæœåº”ç”¨
- **ClassTree.vue**: èŒä¸šæ ‘å¯è§†åŒ–ç•Œé¢

## æ³¨æ„äº‹é¡¹

1. èŒä¸šæ•ˆæœåœ¨ç©å®¶updateå¾ªç¯ä¸­åº”ç”¨
2. æŠ€èƒ½è§£é”åœ¨æ»¡è¶³æ¡ä»¶æ—¶è‡ªåŠ¨è§¦å‘
3. æŠ€èƒ½ä¸Šé™åœ¨è§£é”èŒä¸šåç«‹å³åº”ç”¨
4. éšè—èŒä¸šåªæœ‰åœ¨æ»¡è¶³å‰ç½®æ¡ä»¶åæ‰ä¼šæ˜¾ç¤º
5. å­˜æ¡£ä¼šä¿å­˜å·²è§£é”çš„èŒä¸š
